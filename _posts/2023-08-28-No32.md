---
title: 32. Longest Valid Parentheses
level: hard
categories:
- Stack
- String
- DP
feature_text: |
  ## 32. Longest Valid Parentheses
  Post by ailswan Aug.28, 2023
feature_image: "https://picsum.photos/2560/600?image=872"
python_code: >
  class Solution:
    def search(self, nums: List[int], target: int) -> int:
        if not nums:
            return -1
        l, r = 0, len(nums) - 1
        while l <= r:
            mid = (l + r)// 2
            if nums[mid] == target:
                return mid
            if nums[0] <= nums[mid]:
                if nums[0] <= target < nums[mid]:  
                    r = mid - 1
                else:
                    l = mid + 1
            else:
                if nums[mid] < target <= nums[len(nums) - 1]:# notice: here is len(nums) - 1
                    l = mid + 1
                else:
                    r = mid - 1
        return -1
---

### Problem Statement
**link:**
https://leetcode.com/problems/longest-valid-parentheses/
https://leetcode.cn/problems/longest-valid-parentheses/

Given a string containing just the characters '(' and ')', return the length of the longest valid (well-formed) parentheses 
substring.


**Example:**

**Input:** `s = "(()"`
**Output:** `2`

**Input:** `s = ")()())"`
**Output:** `4`

**Input:** `s = ""`
**Output:** `0`

### Solution Approach

The key is to utilize binary search while determining the sorted half of the rotated array to narrow down the search for the target.

#### Algorithm

1. Using binary search, identify which half of the rotated array, left or right of the middle, is sorted.
2. Determine if the target lies within the sorted half's range and focus the search there, otherwise switch to the opposite half.
